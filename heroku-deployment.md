These are some instructions regarding deployment of website on heroku, using local git repository.

<strong> SOME IMPORTANT NOTES </strong>

<ul>
    <li><strong>DO NOT</strong> SET PORT AND HOST in .env . Sometimes these override the ones set by heroku and crash the deploy.</li>
    <li><strong>DO NOT</strong> USE HOST ANYWHERE. For local development express app directly binds to localhost, and heroku DOES NOT specify HOST in any env var. THUS the listening function should be like :<br />
    <code>port = process.env.PORT;</code><br />
    <code>server.listen(port, callback);</code><br />
    <small>Heroku does not like users specifying host... don't do that.</small></li>
</ul>

<p>Now, for deployment, setup the local git branch with required setup.Install heroku CLI globally and setup heroku account.</p>
<ol>
<li>Setup at least 'build' and 'start' scripts in package.json.
The build script should install all dependencies and compile all files. The start script should start the server. <strong>NOTE</strong> that it is not required to call start from build.heroku itself will first call build, then optimize the files and then call start</li>
<li>run <code>heroku login</code> from shell, which will launch a tab in browser asking to log in to your heroku account. Log in.The the prompt in shell will show message of successful login and shell prompt will return.</li>
<li>Create an app on heroku website from the new App option that is usually on right hand side of 'your apps' tab on heroku website.</li>
<li>Select 'heroku git' option in the deployment options and then setup heroku remote repo on local git repo, using the command given, which will be of type :<br />
<code>heroku git:remote -a YOUR_APP_NAME</code><br /></li>
<li>Push your local branch to heroku master branch.Syntax will be :<br />
<code>git push heroku LOCAL_BRANCH_NAME:master</code><br />
In case you want to push the local master branch itself, then<br />
<code>git push heroku master</code><br />
will suffice.
<li>After push is done, in same shell heroku will display the build log, in which you'll see the ongoing status and steps of build.After successful build, it'll also show the deployed website's url and the heroku git repository's url.One can use <br />
<code>heroku logs</code> and <code>heroku logs --tail</code> to get the logs generated by your app, which are quite helpful to see what went wrong if the app crashes.</li>
</li>
<li><small>Hope that build and deployment goes successful. If any error, find the solution make commit to local repository and start from point 1. If too tired/exhausted, break loop and take a break.</small></li>
<li>For restarting or stopping the faulty build, heroku build plugin can be helpful :<br />
<code>heroku plugins:install heroku-builds</code><br />
<code>heroku builds:cancel -a YOUR_HEROKU_APP_NAME</code><br />
</ol>
